/* eslint-disable */
/**
* This file was automatically generated by OMG (OpenMicrofrontend Generator).
* DO NOT MODIFY!
*/

/* Config Types */
<% for (const configType of configSchemaTypes) { -%>
    <%- configType.ifType -%>

<% } -%>

/* Message Types */
<% for (const messageTypes of messageSchemaTypes) { -%>
    <% Object.values(messageTypes).forEach((messageType) => { -%>
        <%- messageType.ifType -%>

    <% }) -%>
<% } -%>

<%- include('_globalTypes') %>

// Helper

function loadJsResource(url: string, addedElements: Array<HTMLElement>): Promise<void> {
    return new Promise((resolve, reject) => {
        const scriptElem = document.createElement('script');
        scriptElem.src = url;
        if (url.endsWith('.mjs')) {
            scriptElem.type = 'module';
        }
        scriptElem.addEventListener('error', (error) => {
            console.error('[OpenMicrofrontends] Error loading JS resource: ', url, error);
            reject(error);
        });
        scriptElem.addEventListener('load', () => {
            resolve();
        });
        document.head.appendChild(scriptElem);
        addedElements.push(scriptElem);
    });
 }

function loadCssResource(url: string, addedElements: Array<HTMLElement>): void {
    const linkElem = document.createElement('link');
    linkElem.rel = 'stylesheet';
    linkElem.href = url;
    linkElem.addEventListener('error', (error) => {
        console.error('[OpenMicrofrontends] Error loading CSS resource: ', url, error);
    });
    document.head.appendChild(linkElem);
    addedElements.push(linkElem);
}

function toFullUrl(...parts: Array<string>): string {
    return parts
        .map((part) => part.endsWith('/') ? part.slice(0, -1) : part)
        .map((part, idx) => idx > 0 && part && !part.startsWith('/') ? `/${part}` : part)
        .join('');
}

<% for (let i = 0; i < spec.microfrontends.length; i ++) { -%>
    <%- include('_clientContext', {i, spec, configSchemaTypes, messageSchemaTypes}) %>
    <%- include('_clientMessageBus', {i, spec}) %>
    <%- include('_startFunctionBrowser', {i, spec, safeMicrofrontendNames, additionalProperties}) %>
<% } -%>
