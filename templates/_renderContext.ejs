// Render context for Microfrontend: <%-def.microfrontends[i].name%>
type Microfrontend<%-i+1-%>Context = {
    // The unique ID of this Microfrontend instance
    readonly id: string;
    // Two-letter language code (e.g., "fr")
    readonly lang: string;
    readonly user: {
        readonly guest: boolean;
        readonly username: string;
        readonly displayName: string;
        <% if (def.microfrontends[i].accessControl?.permissionRoles && Object.keys(def.microfrontends[i].accessControl.permissionRoles).length > 0) { %>
        readonly permissions: {
            <% Object.keys(def.microfrontends[i].accessControl.permissionRoles).forEach((permissionKey) => { %>
            readonly '<%-permissionKey%>': boolean;
            <% }) %>
        };
        <% } %>
    },
    <% if (def.microfrontends[i].apiProxies && Object.keys(def.microfrontends[i].apiProxies).length > 0) { %>
    readonly apiProxyPaths: {
        <% Object.keys(def.microfrontends[i].apiProxies).forEach((proxyId) => { %>
        readonly '<%-proxyId%>': string;
        <% }) %>
    },
    <% } %>
    readonly config: <%-configSchemaTypes[i].ifName-%>;
    <% if (def.microfrontends[i].messages && Object.keys(def.microfrontends[i].messages).length > 0) { %>
    readonly messageBus: {
        <% Object.keys(def.microfrontends[i].messages).forEach((topic, idx) => { %>
        <% if (def.microfrontends[i].messages[topic].publish) { %>
        publish(topic: '<%-topic-%>%>', data: <%-messageSchemaTypes[idx][topic].ifName-%>): void;
        <% } %>
        <% if (def.microfrontends[i].messages[topic].subscribe) { %>
        subscribe(topic: '<%-topic-%>%>', cb: (data: <%-messageSchemaTypes[idx][topic].ifName-%>) => void): void;
        unsubscribe(topic: '<%-topic-%>%>', cb: (data: <%-messageSchemaTypes[idx][topic].ifName-%>) => void): void;
        <% } %>
        <% }) %>
    };
    <% } %>
}
